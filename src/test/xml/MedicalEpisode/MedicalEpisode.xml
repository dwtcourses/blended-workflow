<?xml version="1.0" encoding="UTF-8"?>
<bw:BlendedWorkflowSchema xmlns:bw="http://www.example.org/BWSchema"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.example.org/BWSchema BWSchema.xsd " uri="MedicalEpisodeBP">
	<bw:CaseInfo>
		<bw:name>Medical Appointment</bw:name>
		<bw:author>Davide Passinhas</bw:author>
		<bw:description>A simple process of a medical appointment.</bw:description>
		<bw:version>1.0</bw:version>
		<bw:identifier>UID_3213f8b4-5757-4674-a6a2-415aa191ca91</bw:identifier>
	</bw:CaseInfo>
	<bw:DataModel>
		<bw:Entity>
			<bw:Name>Patient</bw:Name>
			<bw:Attribute>
				<bw:Name>Name</bw:Name>
				<bw:Type>STRING</bw:Type>
				<bw:isKey>true</bw:isKey>
			</bw:Attribute>
			<bw:Attribute>
				<bw:Name>Address</bw:Name>
				<bw:Type>STRING</bw:Type>
				<bw:isKey>false</bw:isKey>
			</bw:Attribute>
			<bw:Attribute>
				<bw:Name>PhoneNumber</bw:Name>
				<bw:Type>STRING</bw:Type>
				<bw:isKey>false</bw:isKey>
			</bw:Attribute>
			<bw:Attribute>
				<bw:Name>Gender</bw:Name>
				<bw:Type>STRING</bw:Type>
				<bw:isKey>false</bw:isKey>
			</bw:Attribute>
		</bw:Entity>
		<bw:Entity>
			<bw:Name>Episode</bw:Name>
			<bw:Attribute>
				<bw:Name>Date</bw:Name>
				<bw:Type>String</bw:Type>
				<bw:isKey>true</bw:isKey>
			</bw:Attribute>
			<bw:Attribute>
				<bw:Name>Closed</bw:Name>
				<bw:Type>BOOLEAN</bw:Type>
				<bw:isKey>false</bw:isKey>
			</bw:Attribute>
		</bw:Entity>
		<bw:Entity>
			<bw:Name>Patient Data</bw:Name>
			<bw:Attribute>
				<bw:Name>Height</bw:Name>
				<bw:Type>NUMBER</bw:Type>
				<bw:isKey>false</bw:isKey>
			</bw:Attribute>
			<bw:Attribute>
				<bw:Name>Weight</bw:Name>
				<bw:Type>NUMBER</bw:Type>
				<bw:isKey>false</bw:isKey>
			</bw:Attribute>
			<bw:Attribute>
				<bw:Name>Physical Report</bw:Name>
				<bw:Type>STRING</bw:Type>
				<bw:isKey>false</bw:isKey>
			</bw:Attribute>
			<bw:Attribute>
				<bw:Name>Physical Examination</bw:Name>
				<bw:Type>STRING</bw:Type>
				<bw:isKey>false</bw:isKey>
			</bw:Attribute>
			<bw:Attribute>
				<bw:Name>Medical Examination</bw:Name>
				<bw:Type>STRING</bw:Type>
				<bw:isKey>true</bw:isKey>
			</bw:Attribute>
		</bw:Entity>
		<bw:Entity>
			<bw:Name>Prescription</bw:Name>
			<bw:Attribute>
				<bw:Name>Recipe</bw:Name>
				<bw:Type>STRING</bw:Type>
				<bw:isKey>true</bw:isKey>
			</bw:Attribute>
		</bw:Entity>
		<bw:Entity>
			<bw:Name>Medical Report</bw:Name>
			<bw:Attribute>
				<bw:Name>Report</bw:Name>
				<bw:Type>STRING</bw:Type>
				<bw:isKey>true</bw:isKey>
			</bw:Attribute>
			<bw:Attribute>
				<bw:Name>Closed</bw:Name>
				<bw:Type>BOOLEAN</bw:Type>
				<bw:isKey>false</bw:isKey>
			</bw:Attribute>
		</bw:Entity>
		<bw:Relation>
			<bw:Name>Patient 1-1 Episode</bw:Name>
			<bw:EntityOne>
				<bw:EntityName>Patient</bw:EntityName>
				<bw:EntityCardinality>ONE</bw:EntityCardinality>
				<bw:isEntityKey>true</bw:isEntityKey>
			</bw:EntityOne>
			<bw:EntityTwo>
				<bw:EntityName>Episode</bw:EntityName>
				<bw:EntityCardinality>ONE</bw:EntityCardinality>
				<bw:isEntityKey>false</bw:isEntityKey>
			</bw:EntityTwo>
		</bw:Relation>
		<bw:Relation>
			<bw:Name>Episode 1-0* Patient Data</bw:Name>
			<bw:EntityOne>
				<bw:EntityName>Episode</bw:EntityName>
				<bw:EntityCardinality>ONE</bw:EntityCardinality>
				<bw:isEntityKey>false</bw:isEntityKey>
			</bw:EntityOne>
			<bw:EntityTwo>
				<bw:EntityName>Patient Data</bw:EntityName>
				<bw:EntityCardinality>ZERO_OR_ONE</bw:EntityCardinality>
				<bw:isEntityKey>false</bw:isEntityKey>
			</bw:EntityTwo>
		</bw:Relation>
		<bw:Relation>
			<bw:Name>Episode 1-1 Medical Report</bw:Name>
			<bw:EntityOne>
				<bw:EntityName>Episode</bw:EntityName>
				<bw:EntityCardinality>ONE</bw:EntityCardinality>
				<bw:isEntityKey>false</bw:isEntityKey>
			</bw:EntityOne>
			<bw:EntityTwo>
				<bw:EntityName>Medical Report</bw:EntityName>
				<bw:EntityCardinality>ONE</bw:EntityCardinality>
				<bw:isEntityKey>true</bw:isEntityKey>
			</bw:EntityTwo>
		</bw:Relation>
		<bw:Relation>
			<bw:Name>Episode 1-* Prescription</bw:Name>
			<bw:EntityOne>
				<bw:EntityName>Episode</bw:EntityName>
				<bw:EntityCardinality>ONE</bw:EntityCardinality>
				<bw:isEntityKey>false</bw:isEntityKey>
			</bw:EntityOne>
			<bw:EntityTwo>
				<bw:EntityName>Prescription</bw:EntityName>
				<bw:EntityCardinality>MANY</bw:EntityCardinality>
				<bw:isEntityKey>false</bw:isEntityKey>
			</bw:EntityTwo>
		</bw:Relation>
	</bw:DataModel>
	<bw:GoalModel>
		<bw:RootGoal>
			<bw:Name>Diagnose Patient</bw:Name>
			<bw:description>Diagnose the Patient</bw:description>
			<bw:SucessCondition>existsEntity(Patient) and existsEntity(Medical Report) and compareAttributeTo(Medical Report.Closed,=.true) and compareAttributeTo(Episode.Closed,=.true)</bw:SucessCondition>
			<bw:ActivateConditionCount>1</bw:ActivateConditionCount>
			<bw:ActivateCondition1>true</bw:ActivateCondition1>
			<bw:Context>Patient</bw:Context>
		</bw:RootGoal>
		<bw:Goal>
			<bw:Type>Achieve</bw:Type>
			<bw:Name>Observe Patient</bw:Name>
			<bw:description>Observe the Patient</bw:description>
			<bw:SucessCondition>existsEntity(Episode) and existsEntity(Patient) and existsAttribute(Patient.Gender) and existsAttribute(Patient.Address) and existsAttribute(Patient.PhoneNumber) and existsAttribute(Patient Data.Medical Examination)</bw:SucessCondition>
			<bw:ActivateConditionCount>1</bw:ActivateConditionCount>
			<bw:ActivateCondition1>true</bw:ActivateCondition1>
			<bw:ParentName>Diagnose Patient</bw:ParentName>
			<bw:Context>Patient</bw:Context>
		</bw:Goal>
		<bw:Goal>
			<bw:Type>Achieve</bw:Type>
			<bw:Name>Write Medical Report</bw:Name>
			<bw:description>Write the Patient Medical Report</bw:description>
			<bw:SucessCondition>existsAttribute(Medical Report.Report)</bw:SucessCondition>
			<bw:ActivateConditionCount>1</bw:ActivateConditionCount>
			<bw:ActivateCondition1>existsAttribute(Prescription.Recipe)</bw:ActivateCondition1>
			<bw:ParentName>Diagnose Patient</bw:ParentName>
			<bw:Context>Patient</bw:Context>
		</bw:Goal>
		<bw:Goal>
			<bw:Type>Achieve</bw:Type>
			<bw:Name>Collect Data</bw:Name>
			<bw:description>Collect the Patient height and weight</bw:description>
			<bw:SucessCondition>existsAttribute(Patient Data.Height) and existsAttribute(Patient Data.Weight)</bw:SucessCondition>
			<bw:ActivateConditionCount>1</bw:ActivateConditionCount>
			<bw:ActivateCondition1>true</bw:ActivateCondition1>
			<bw:ParentName>Observe Patient</bw:ParentName>
			<bw:Context>Patient</bw:Context>
		</bw:Goal>
		<bw:Goal>
			<bw:Type>Achieve</bw:Type>
			<bw:Name>Physical Examination</bw:Name>
			<bw:description>Physical Examine the Patient and write the physical report</bw:description>
			<bw:SucessCondition>existsAttribute(Patient Data.Physical Report) and existsAttribute(Patient Data.Physical Examination)</bw:SucessCondition>
			<bw:ActivateConditionCount>1</bw:ActivateConditionCount>
			<bw:ActivateCondition1>true</bw:ActivateCondition1>
			<bw:ParentName>Observe Patient</bw:ParentName>
			<bw:Context>Patient</bw:Context>
		</bw:Goal>
		<bw:Goal>
			<bw:Type>Achieve</bw:Type>
			<bw:Name>Prescribe</bw:Name>
			<bw:description>Prescribe the Patient some drugs</bw:description>
			<bw:SucessCondition>existsAttribute(Prescription.Recipe)</bw:SucessCondition>
			<bw:ActivateConditionCount>1</bw:ActivateConditionCount>
			<bw:ActivateCondition1>true</bw:ActivateCondition1>
			<bw:ParentName>Write Medical Report</bw:ParentName>
			<bw:Context>Patient</bw:Context>
		</bw:Goal>
		<bw:Goal>
			<bw:Type>Achieve</bw:Type>
			<bw:Name>Add Patient</bw:Name>
			<bw:description>Add Patient</bw:description>
			<bw:SucessCondition>existsEntity(Patient)</bw:SucessCondition>
			<bw:ActivateConditionCount>1</bw:ActivateConditionCount>
			<bw:ActivateCondition1>existsAttribute(Patient.Gender) and existsAttribute(Patient.Address)</bw:ActivateCondition1>
			<bw:ParentName>Diagnose Patient</bw:ParentName>
			<bw:Context>Patient</bw:Context>
		</bw:Goal>
		<bw:Goal>
			<bw:Type>Achieve</bw:Type>
			<bw:Name>Add Gender</bw:Name>
			<bw:description>Add Gender</bw:description>
			<bw:SucessCondition>existsAttribute(Patient.Gender)</bw:SucessCondition>
			<bw:ActivateConditionCount>1</bw:ActivateConditionCount>
			<bw:ActivateCondition1>true</bw:ActivateCondition1>
			<bw:ParentName>Add Patient</bw:ParentName>
			<bw:Context>Patient</bw:Context>
		</bw:Goal>
		<bw:Goal>
			<bw:Type>Achieve</bw:Type>
			<bw:Name>Add Address</bw:Name>
			<bw:description>Add Address</bw:description>
			<bw:SucessCondition>existsAttribute(Patient.Address)</bw:SucessCondition>
			<bw:ActivateConditionCount>1</bw:ActivateConditionCount>
			<bw:ActivateCondition1>true</bw:ActivateCondition1>
			<bw:ParentName>Add Patient</bw:ParentName>
			<bw:Context>Patient</bw:Context>
		</bw:Goal>
		<bw:Goal>
			<bw:Type>Achieve</bw:Type>
			<bw:Name>Create Episode</bw:Name>
			<bw:description>Add Episode</bw:description>
			<bw:SucessCondition>existsEntity(Episode)</bw:SucessCondition>
			<bw:ActivateConditionCount>1</bw:ActivateConditionCount>
			<bw:ActivateCondition1>true</bw:ActivateCondition1>
			<bw:ParentName>Diagnose Patient</bw:ParentName>
			<bw:Context>Episode</bw:Context>
		</bw:Goal>
		<bw:Goal>
			<bw:Type>Achieve</bw:Type>
			<bw:Name>Create Medical Report</bw:Name>
			<bw:description>Create Medical Report</bw:description>
			<bw:SucessCondition>existsEntity(Medical Report)</bw:SucessCondition>
			<bw:ActivateConditionCount>1</bw:ActivateConditionCount>
			<bw:ActivateCondition1>true</bw:ActivateCondition1>
			<bw:ParentName>Diagnose Patient</bw:ParentName>
			<bw:Context>Medical Report</bw:Context>
		</bw:Goal>
		
		<bw:MaintainGoal>
			<bw:Type>Maintain</bw:Type>
			<bw:Name>MaintainTrue</bw:Name>
			<bw:description>MaintainTest</bw:description>
			<bw:MaintainCondition>true</bw:MaintainCondition>
			<bw:Context>Patient</bw:Context>
		</bw:MaintainGoal>
		<bw:MaintainGoal>
			<bw:Type>Maintain</bw:Type>
			<bw:Name>MaintainForAll</bw:Name>
			<bw:description>MaintainTest2</bw:description>
			<bw:MaintainCondition>forAll[Patient.Patient 1-1 Episode,existsEntity(Patient)]</bw:MaintainCondition>
			<bw:Context>Episode</bw:Context>
		</bw:MaintainGoal>
		<bw:MaintainGoal>
			<bw:Type>Maintain</bw:Type>
			<bw:Name>MaintainExistsOne</bw:Name>
			<bw:description>MaintainTest3</bw:description>
			<bw:MaintainCondition>existsOne[Patient.Patient 1-1 Episode,compareAttributeTo(Patient.Name,=.John)]</bw:MaintainCondition>
			<bw:Context>Episode</bw:Context>
		</bw:MaintainGoal>
	</bw:GoalModel>
	<bw:TaskModel>
		<bw:Task>
			<bw:Name>Check-in Patient</bw:Name>
			<bw:description>Check-in the Patient</bw:description>
			<bw:PreCondition>true</bw:PreCondition>
			<bw:PostCondition>existsEntity(Episode) and existsEntity(Patient) and existsAttribute(Patient.Gender) and existsAttribute(Patient.Address) and existsAttribute(Patient.PhoneNumber)</bw:PostCondition>
			<bw:FlowType>root</bw:FlowType>
			<bw:JoinCode>xor</bw:JoinCode>
			<bw:SplitCode>and</bw:SplitCode>
			
			<bw:NextTaskCount>2</bw:NextTaskCount>
			<bw:NextTaskName1>Physical Examination</bw:NextTaskName1>
			<bw:NextTaskName2>Collect Data</bw:NextTaskName2>
		</bw:Task>
		<bw:Task>
			<bw:Name>Physical Examination</bw:Name>
			<bw:description>Physical Examine the Patient and write the physical report</bw:description>
			<bw:PreCondition>existsEntity(Episode)</bw:PreCondition>
			<bw:PostCondition>existsAttribute(Patient Data.Physical Report) and existsAttribute(Patient Data.Physical Examination)</bw:PostCondition>
			<bw:FlowType>none</bw:FlowType>
			<bw:JoinCode>xor</bw:JoinCode>
			<bw:SplitCode>and</bw:SplitCode>
			<bw:PreviousTaskName>Check-in Patient</bw:PreviousTaskName>
			<bw:NextTaskCount>1</bw:NextTaskCount>
			<bw:NextTaskName1>Doctor Appointment</bw:NextTaskName1>
		</bw:Task>
		<bw:Task>
			<bw:Name>Collect Data</bw:Name>
			<bw:description>Collect the Patient height and weight</bw:description>
			<bw:PreCondition>existsEntity(Episode)</bw:PreCondition>
			<bw:PostCondition>existsAttribute(Patient Data.Height) and existsAttribute(Patient Data.Weight)</bw:PostCondition>
			<bw:FlowType>none</bw:FlowType>
			<bw:JoinCode>xor</bw:JoinCode>
			<bw:SplitCode>and</bw:SplitCode>
			<bw:PreviousTaskName>Check-in Patient</bw:PreviousTaskName>
			<bw:NextTaskCount>1</bw:NextTaskCount>
			<bw:NextTaskName1>Doctor Appointment</bw:NextTaskName1>
		</bw:Task>
		<bw:Task>
			<bw:Name>Doctor Appointment</bw:Name>
			<bw:description>Patient doctor appointment</bw:description>
			<bw:PreCondition>existsEntity(Episode) and existsAttribute(Patient Data.Height) and existsAttribute(Patient Data.Weight) and existsAttribute(Patient Data.Physical Report)</bw:PreCondition>
			<bw:PostCondition>existsEntity(Prescription) and existsEntity(Medical Report) and compareAttributeTo(Medical Report.Closed,=.true) and existsAttribute(Patient Data.Medical Examination)</bw:PostCondition>
			<bw:FlowType>and-join</bw:FlowType>
			<bw:JoinCode>and</bw:JoinCode>
			<bw:SplitCode>and</bw:SplitCode>
			<bw:PreviousTaskName1>Physical Examination</bw:PreviousTaskName1>
			<bw:PreviousTaskName2>Collect Data</bw:PreviousTaskName2>
			<bw:NextTaskCount>1</bw:NextTaskCount>
			<bw:NextTaskName1>Check-out Patient</bw:NextTaskName1>
		</bw:Task>
		<bw:Task>
			<bw:Name>Check-out Patient</bw:Name>
			<bw:description>Check-out the Patient</bw:description>
			<bw:PreCondition>existsEntity(Episode)</bw:PreCondition>
			<bw:PostCondition>compareAttributeTo(Episode.Closed,=.true)</bw:PostCondition>
			<bw:FlowType>none</bw:FlowType>
			<bw:JoinCode>xor</bw:JoinCode>
			<bw:SplitCode>and</bw:SplitCode>
			<bw:PreviousTaskName>Doctor Appointment</bw:PreviousTaskName>
			<bw:NextTaskCount>0</bw:NextTaskCount>
		</bw:Task>
	</bw:TaskModel>
</bw:BlendedWorkflowSchema>