<specification name="Doctor Appointment" specId="DoctorAppointment">
  <data-model>
    <entities>
      <entity name="Medication" exists="false" mandatory="false">
        <attribute name="heartImpact" type="Boolean" mandatory="false" />
        <attribute name="quantity" type="Number" mandatory="false" />
        <attribute name="name" type="String" mandatory="false" />
      </entity>
      <entity name="Data" exists="false" mandatory="false">
        <attribute name="physicalCondition" type="String" mandatory="false" />
        <attribute name="bloodPressure" type="Number" mandatory="false" />
        <attribute name="weight" type="Number" mandatory="false" />
        <attribute name="height" type="Number" mandatory="false" />
      </entity>
      <entity name="Report" exists="false" mandatory="false">
        <attribute name="desc" type="String" mandatory="true" />
      </entity>
      <entity name="Prescription" exists="false" mandatory="false">
        <attribute name="desc" type="String" mandatory="false" />
      </entity>
      <entity name="Episode" exists="false" mandatory="true">
        <attribute name="checkout" type="Boolean" mandatory="false" />
        <attribute name="checkin" type="Boolean" mandatory="false" />
        <attribute name="reserveDate" type="Date" mandatory="false" />
      </entity>
      <entity name="Doctor" exists="false" mandatory="false">
        <attribute name="age" type="Number" mandatory="false" />
        <attribute name="name" type="String" mandatory="false" />
      </entity>
      <entity name="Patient" exists="false" mandatory="false">
        <attribute name="heartProblems" type="Boolean" mandatory="false" />
        <attribute name="age" type="Number" mandatory="false" />
        <attribute name="name" type="String" mandatory="false" />
      </entity>
    </entities>
    <associations>
      <association name="PrescriptionHasMedication">
        <member entity="Prescription" role="prescription" cardinality="1" />
        <member entity="Medication" role="medication" cardinality="1..*" />
      </association>
      <association name="EpisodehasReport">
        <member entity="Episode" role="episode" cardinality="1" />
        <member entity="Report" role="report" cardinality="1" />
      </association>
      <association name="EpisodeHasData">
        <member entity="Episode" role="episode" cardinality="1" />
        <member entity="Data" role="data" cardinality="1" />
      </association>
      <association name="EpisodeHasPrescription">
        <member entity="Episode" role="episode" cardinality="1" />
        <member entity="Prescription" role="prescription" cardinality="0..1" />
      </association>
      <association name="PatientHasEpisode">
        <member entity="Patient" role="patient" cardinality="1" />
        <member entity="Episode" role="episode" cardinality="0..*" />
      </association>
      <association name="EpisodeHasDoctor">
        <member entity="Episode" role="episode" cardinality="0..*" />
        <member entity="Doctor" role="doctor" cardinality="1" />
      </association>
    </associations>
  </data-model>
  <activity-model />
  <goal-model />
  <resource-model>
    <capabilities>
      <capability name="BelongsToDoctorsAssociation" description="Represents the enrolment of a resource in the country's doctor's association" />
    </capabilities>
    <persons>
      <person name="Helen">
        <positions>
          <UnitDirector />
        </positions>
        <capabilities />
      </person>
      <person name="Mary">
        <positions>
          <Nurse />
        </positions>
        <capabilities />
      </person>
      <person name="Carol">
        <positions>
          <Nurse />
        </positions>
        <capabilities />
      </person>
      <person name="Luke">
        <positions>
          <Doctor />
        </positions>
        <capabilities>
          <BelongsToDoctorsAssociation />
        </capabilities>
      </person>
      <person name="William">
        <positions>
          <Doctor />
        </positions>
        <capabilities />
      </person>
      <person name="Magnus">
        <positions>
          <AdministrativeManager />
        </positions>
        <capabilities />
      </person>
      <person name="Angela">
        <positions>
          <SchedulingAdministrative />
        </positions>
        <capabilities />
      </person>
      <person name="Anna">
        <positions>
          <Receptionist />
        </positions>
        <capabilities />
      </person>
      <person name="George">
        <positions>
          <Receptionist />
        </positions>
        <capabilities />
      </person>
      <person name="John">
        <positions>
          <Receptionist />
        </positions>
        <capabilities />
      </person>
    </persons>
    <positions>
      <position name="Receptionist" unit="OrthopedicUnit" reports-to="AdministrativeManager">
        <roles>
          <Scheduler />
          <WelcomePatients />
          <ManagePatientInformation />
        </roles>
        <delegate-to />
      </position>
      <position name="SchedulingAdministrative" unit="OrthopedicUnit" reports-to="AdministrativeManager">
        <roles>
          <Scheduler />
        </roles>
        <delegate-to />
      </position>
      <position name="Nurse" unit="OrthopedicUnit" reports-to="UnitDirector">
        <roles>
          <ScreeningOfPatients />
          <FirstAids />
        </roles>
        <delegate-to />
      </position>
      <position name="Doctor" unit="OrthopedicUnit" reports-to="UnitDirector">
        <roles>
          <ScreeningOfPatients />
          <FirstAids />
          <TreatPatients />
          <MedicalExaminator />
        </roles>
        <delegate-to>
          <Nurse />
        </delegate-to>
      </position>
      <position name="AdministrativeManager" unit="OrthopedicUnit" reports-to="UnitDirector">
        <roles>
          <WorkLoadScheduler />
          <UnitAdministrativesReporter />
          <ManagePatientInformation />
        </roles>
        <delegate-to>
          <SchedulingAdministrative />
          <Receptionist />
        </delegate-to>
      </position>
      <position name="UnitDirector" unit="OrthopedicUnit" description="Person is charge for the whole orthopedic unit">
        <roles>
          <WorkLoadScheduler />
          <UnitReporter />
        </roles>
        <delegate-to>
          <AdministrativeManager />
        </delegate-to>
      </position>
    </positions>
    <roles>
      <role name="WelcomePatients" />
      <role name="MedicalExaminator" />
      <role name="TreatPatients" />
      <role name="FirstAids" />
      <role name="ScreeningOfPatients" />
      <role name="ManagePatientInformation" />
      <role name="UnitAdministrativesReporter" />
      <role name="UnitReporter" />
      <role name="Scheduler" />
      <role name="WorkLoadScheduler" description="Schedule work items to his/hers subordinates" />
    </roles>
    <units>
      <unit name="OrthopedicUnit" />
    </units>
    <entity-is-person>
      <Doctor />
      <Patient />
    </entity-is-person>
  </resource-model>
  <resource-rules>
    <resource-rule product="Medication" model="data-model" type="responsible-for">
      <IsPersonInTaskDutyExpr task-duty="RESPONSIBLE FOR" product="Prescription" />
    </resource-rule>
    <resource-rule product="Data" model="data-model" type="responsible-for">
      <HasRoleExpr role="ScreeningOfPatients" unit="OrthopedicUnit" />
    </resource-rule>
    <resource-rule product="Data" model="data-model" type="informs">
      <IsPersonDataObjectExpr data-field="Doctor" />
    </resource-rule>
    <resource-rule product="Report" model="data-model" type="responsible-for">
      <AndExpr>
        <HasPositionExpr position="Doctor" />
        <IsPersonDataObjectExpr data-field="Doctor" />
      </AndExpr>
    </resource-rule>
    <resource-rule product="Report" model="data-model" type="informs">
      <IsPersonDataObjectExpr data-field="Patient" />
    </resource-rule>
    <resource-rule product="Prescription" model="data-model" type="responsible-for">
      <AndExpr>
        <HasPositionExpr position="Doctor" />
        <HasCapabilityExpr capability="BelongsToDoctorsAssociation" />
      </AndExpr>
    </resource-rule>
    <resource-rule product="Episode" model="data-model" type="responsible-for">
      <AndExpr>
        <NotExpr>
          <IsPersonInTaskDutyExpr task-duty="RESPONSIBLE FOR" product="Patient" />
        </NotExpr>
        <HasRoleExpr role="Scheduler" unit="OrthopedicUnit" />
      </AndExpr>
    </resource-rule>
    <resource-rule product="Doctor" model="data-model" type="responsible-for">
      <HasPositionExpr position="AdministrativeManager" />
    </resource-rule>
    <resource-rule product="Doctor" model="data-model" type="informs">
      <HasPositionExpr position="AdministrativeManager" />
    </resource-rule>
    <resource-rule product="Patient" model="data-model" type="responsible-for">
      <HasPositionExpr position="AdministrativeManager" />
    </resource-rule>
    <resource-rule product="Medication.quantity" model="data-model" type="responsible-for">
      <IsPersonInTaskDutyExpr task-duty="RESPONSIBLE FOR" product="Prescription" />
    </resource-rule>
    <resource-rule product="Medication.name" model="data-model" type="responsible-for">
      <IsPersonInTaskDutyExpr task-duty="RESPONSIBLE FOR" product="Prescription" />
    </resource-rule>
    <resource-rule product="Data.physicalCondition" model="data-model" type="responsible-for">
      <HasRoleExpr role="ScreeningOfPatients" unit="OrthopedicUnit" />
    </resource-rule>
    <resource-rule product="Data.physicalCondition" model="data-model" type="informs">
      <IsPersonDataObjectExpr data-field="Doctor" />
    </resource-rule>
    <resource-rule product="Data.bloodPressure" model="data-model" type="responsible-for">
      <HasRoleExpr role="ScreeningOfPatients" unit="OrthopedicUnit" />
    </resource-rule>
    <resource-rule product="Data.bloodPressure" model="data-model" type="informs">
      <IsPersonDataObjectExpr data-field="Doctor" />
    </resource-rule>
    <resource-rule product="Data.weight" model="data-model" type="responsible-for">
      <HasRoleExpr role="ScreeningOfPatients" unit="OrthopedicUnit" />
    </resource-rule>
    <resource-rule product="Data.weight" model="data-model" type="informs">
      <IsPersonDataObjectExpr data-field="Doctor" />
    </resource-rule>
    <resource-rule product="Data.height" model="data-model" type="responsible-for">
      <HasRoleExpr role="ScreeningOfPatients" unit="OrthopedicUnit" />
    </resource-rule>
    <resource-rule product="Data.height" model="data-model" type="informs">
      <IsPersonDataObjectExpr data-field="Doctor" />
    </resource-rule>
    <resource-rule product="Report.desc" model="data-model" type="responsible-for">
      <AndExpr>
        <HasPositionExpr position="Doctor" />
        <IsPersonDataObjectExpr data-field="Doctor" />
      </AndExpr>
    </resource-rule>
    <resource-rule product="Report.desc" model="data-model" type="informs">
      <IsPersonDataObjectExpr data-field="Patient" />
    </resource-rule>
    <resource-rule product="Prescription.desc" model="data-model" type="responsible-for">
      <AndExpr>
        <HasPositionExpr position="Doctor" />
        <HasCapabilityExpr capability="BelongsToDoctorsAssociation" />
      </AndExpr>
    </resource-rule>
    <resource-rule product="Prescription.desc" model="data-model" type="informs">
      <AndExpr>
        <HasPositionExpr position="Doctor" />
        <HistoryExecutingExpr quantifier="LEAST" data-field="Prescription" />
      </AndExpr>
    </resource-rule>
    <resource-rule product="Episode.checkout" model="data-model" type="responsible-for">
      <HasPositionExpr position="Receptionist" />
    </resource-rule>
    <resource-rule product="Episode.checkout" model="data-model" type="informs">
      <OrExpr>
        <HasPositionExpr position="AdministrativeManager" />
        <HasRoleExpr role="Scheduler" unit="OrthopedicUnit" />
      </OrExpr>
    </resource-rule>
    <resource-rule product="Episode.checkin" model="data-model" type="responsible-for">
      <HasPositionExpr position="Receptionist" />
    </resource-rule>
    <resource-rule product="Episode.checkin" model="data-model" type="informs">
      <HasRoleExpr role="Scheduler" unit="OrthopedicUnit" />
    </resource-rule>
    <resource-rule product="Episode.reserveDate" model="data-model" type="responsible-for">
      <HasRoleExpr role="Scheduler" unit="OrthopedicUnit" />
    </resource-rule>
    <resource-rule product="Doctor.age" model="data-model" type="responsible-for">
      <HasPositionExpr position="UnitDirector" />
    </resource-rule>
    <resource-rule product="Doctor.age" model="data-model" type="informs">
      <HasPositionExpr position="AdministrativeManager" />
    </resource-rule>
    <resource-rule product="Doctor.name" model="data-model" type="responsible-for">
      <HasPositionExpr position="UnitDirector" />
    </resource-rule>
    <resource-rule product="Doctor.name" model="data-model" type="informs">
      <HasPositionExpr position="AdministrativeManager" />
    </resource-rule>
    <resource-rule product="Patient.heartProblems" model="data-model" type="responsible-for">
      <HasRoleExpr role="ScreeningOfPatients" unit="OrthopedicUnit" />
    </resource-rule>
    <resource-rule product="Patient.age" model="data-model" type="responsible-for">
      <HasRoleExpr role="ManagePatientInformation" unit="OrthopedicUnit" />
    </resource-rule>
    <resource-rule product="Patient.name" model="data-model" type="responsible-for">
      <HasRoleExpr role="ManagePatientInformation" unit="OrthopedicUnit" />
    </resource-rule>
  </resource-rules>
</specification>
